<!DOCTYPE html>
<html
  xmlns:th="https://www.thymeleaf.org"
  th:replace="~{modules/layout :: html(title = ${post.spec.title}, aside = ~{::aside}, content = ~{::content}, footer = ~{::footer})}"
>
  <th:block th:fragment="aside">
    <div class="toc-container sticky top-16">
      <p class="text-slate-800 font-bold text-lg dark:text-slate-200">目录</p>
      <div class="toc mt-2 -ml-[1em]"></div>
    </div>
  </th:block>
  <th:block th:fragment="content">
    <div class="border-slate-200 laptop:border laptop:rounded-lg laptop:p-16 dark:border-slate-800">
      <div>
        <h1 th:text="${post.spec.title}" class="text-slate-800 font-bold text-3xl dark:text-slate-200"></h1>
        <div th:utext="${post.content.content}" class="markdown-body py-6 w-full overflow-hidden"></div>
        <div class="text-slate-600 text-base dark:text-slate-400">
          <p class="my-4" th:if="${not #arrays.isEmpty(post.categories)}">
            <span class="font-bold">分类:</span>
            <a
              th:each="category : ${post.categories}"
              th:text="${category.spec.displayName}"
              th:href="@{${category.status.permalink}}"
              class="inline-block px-1 hover:text-sky-400 transition-colors"
            ></a>
          </p>
          <p class="my-4" th:if="${not #arrays.isEmpty(post.tags)}">
            <span class="font-bold">标签:</span>
            <a
              th:each="tag : ${post.tags}"
              th:text="|#${tag.spec.displayName}|"
              th:href="@{${tag.status.permalink}}"
              class="inline-block px-1 hover:text-sky-400 transition-colors"
            ></a>
          </p>
          <p
            class="text-right text-sm"
            th:text="|发表于 ${#dates.format(post.spec.publishTime, 'yyyy-MM-dd HH:mm')}|"
          ></p>
          <p
            class="text-right text-sm"
            th:text="|上次更新 ${#dates.format(post.status.lastModifyTime, 'yyyy-MM-dd HH:mm')}|"
          ></p>
        </div>
      </div>
      <div th:if="${pluginFinder.available('PluginCommentWidget') and post.spec.allowComment}" class="mt-16">
        <h3 class="text-2xl font-bold text-slate-800 py-3 dark:text-slate-200">评论</h3>
        <halo:comment
          group="content.halo.run"
          kind="Post"
          th:attr="name=${post.metadata.name}"
          colorScheme="window.main.currentColorScheme"
        />
      </div>
    </div>
  </th:block>
  <th:block th:fragment="footer">
    <script>
      main.generateToc();
      main.highlight();
    </script>
  </th:block>
</html>
